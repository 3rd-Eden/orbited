<html>
  <head>
    <title>Test</title>
    <link rel="stylesheet" href="chat.css">
	<script src="/_/static/library.js"></script>

    <script>
		Orbited.require("socket.js")
		Orbited.require("shell.js")

		onload = function() {
			var output = document.getElementById('events')
			shell = new Shell(output)
			
			c = TCPstart()
    	}

		TCPstart = function() {
		    var c = new TCPConnection(null, null, false)
			c.onopen = TCPonopen
			c.onread = TCPonread
			c.onclose = TCPonclose
		    return c
		}
		TCPonopen = function() {
			shell.print("Connected to TCP Socket")
			c.send("first message")
		}
		TCPonread = function(data) {
		    shell.print("Socket received: " +  data)
		}
		TCPonclose = function() {
			shell.print("Socket Closed")
		}
		
		sendMSG = function() {
			var text = document.getElementById('messagebox').value
			c.send(text)
		}


    </script>
  </head>
  <body>
    <h1>Test</h1>
    <div id="events" style="height: 200px; overflow-y: scroll"></div>

	<button onClick="sendMSG()">send</button><input type=text value="hello from the browser" id="messagebox">
	
  </body>
</html>