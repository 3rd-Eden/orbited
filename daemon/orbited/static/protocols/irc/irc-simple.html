<html>
 <head>
  <script>document.domain = document.domain</script>
  <script src="/_/static/URL.js"></script>
  <script src="/_/static/BinaryTCPConnectionBuild.js"></script>

  <script src="/_/static/protocols/irc/irc.js"></script>
  <script>
    irc = new IRCClient()
   function print(s) {
        while(s.indexOf('\r') != -1)
            s = s.replace('\r', '\\r')
        while(s.indexOf('\n') != -1)
            s = s.replace('\n', '\\n<br>')
       output = document.getElementById("shell")
       output.innerHTML += "&rarr; " + s + "<br>"
       output.scrollTop = self.output.scrollHeight     
   }
   function connect() {
        irc.onmessage = function(ident_name, msg) {
            print("<b style='color:red'>" + ident_name +"</b>" + msg)   
        }
        irc.onnames = print
   
        irc.onident = function() {
            print('onident!')
            irc.nick('mcarterhttp6')
            irc.ident('mcarter', '8 *', 'Michael Carter HTTP')
            irc.join('#orbited.dev')
            irc.privmsg("#orbited.dev", 'Hello World')
        }
        irc.connect('irc.freenode.org', 6667)
   }
  </script>
 </head>
 <body>
  <button onClick=connect()>connect</button><button onclick="irc.quit()">Quit</button><br>
  <input type=text id=data> <button onClick="irc.privmsg('#orbited.dev', document.getElementById('data').value )">send</button><br>

  <div style="border: 1px solid black; height: 200px; overflow-y: scroll" id="shell"></div>
 </body>
</html>
