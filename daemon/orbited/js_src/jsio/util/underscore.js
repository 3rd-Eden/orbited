(function(){var c=this;var e=c._;var g=function(h){this._wrapped=h};var f=typeof StopIteration!=="undefined"?StopIteration:"__break__";var d=c._=function(h){return new g(h)};if(typeof exports!=="undefined"){exports._=d}d.VERSION="0.4.3";d.each=function(q,o,n){var j=0;try{if(q.forEach){q.forEach(o,n)}else{if(q.length){for(var m=0,h=q.length;m<h;m++){o.call(n,q[m],m,q)}}else{for(var k in q){if(Object.prototype.hasOwnProperty.call(q,k)){o.call(n,q[k],k,q)}}}}}catch(p){if(p!=f){throw p}}return q};d.map=function(k,j,i){if(k&&k.map){return k.map(j,i)}var h=[];d.each(k,function(n,l,m){h.push(j.call(i,n,l,m))});return h};d.reduce=function(k,h,j,i){if(k&&k.reduce){return k.reduce(d.bind(j,i),h)}d.each(k,function(n,l,m){h=j.call(i,h,n,l,m)});return h};d.reduceRight=function(k,h,j,i){if(k&&k.reduceRight){return k.reduceRight(d.bind(j,i),h)}var l=d.clone(d.toArray(k)).reverse();d.each(l,function(n,m){h=j.call(i,h,n,m,k)});return h};d.detect=function(k,j,i){var h;d.each(k,function(n,l,m){if(j.call(i,n,l,m)){h=n;d.breakLoop()}});return h};d.select=function(k,j,i){if(k.filter){return k.filter(j,i)}var h=[];d.each(k,function(n,l,m){j.call(i,n,l,m)&&h.push(n)});return h};d.reject=function(k,j,i){var h=[];d.each(k,function(n,l,m){!j.call(i,n,l,m)&&h.push(n)});return h};d.all=function(k,j,i){j=j||d.identity;if(k.every){return k.every(j,i)}var h=true;d.each(k,function(n,l,m){if(!(h=h&&j.call(i,n,l,m))){d.breakLoop()}});return h};d.any=function(k,j,i){j=j||d.identity;if(k.some){return k.some(j,i)}var h=false;d.each(k,function(n,l,m){if(h=j.call(i,n,l,m)){d.breakLoop()}});return h};d.include=function(j,i){if(d.isArray(j)){return d.indexOf(j,i)!=-1}var h=false;d.each(j,function(k){if(h=k===i){d.breakLoop()}});return h};d.invoke=function(i,j){var h=d.toArray(arguments).slice(2);return d.map(i,function(k){return(j?k[j]:k).apply(k,h)})};d.pluck=function(i,h){return d.map(i,function(j){return j[h]})};d.max=function(k,j,i){if(!j&&d.isArray(k)){return Math.max.apply(Math,k)}var h={computed:-Infinity};d.each(k,function(o,l,n){var m=j?j.call(i,o,l,n):o;m>=h.computed&&(h={value:o,computed:m})});return h.value};d.min=function(k,j,i){if(!j&&d.isArray(k)){return Math.min.apply(Math,k)}var h={computed:Infinity};d.each(k,function(o,l,n){var m=j?j.call(i,o,l,n):o;m<h.computed&&(h={value:o,computed:m})});return h.value};d.sortBy=function(j,i,h){return d.pluck(d.map(j,function(m,k,l){return{value:m,criteria:i.call(h,m,k,l)}}).sort(function(n,m){var l=n.criteria,k=m.criteria;return l<k?-1:l>k?1:0}),"value")};d.sortedIndex=function(m,l,j){j=j||d.identity;var h=0,k=m.length;while(h<k){var i=(h+k)>>1;j(m[i])<j(l)?h=i+1:k=i}return h};d.toArray=function(h){if(!h){return[]}if(d.isArray(h)){return h}return d.map(h,function(i){return i})};d.size=function(h){return d.toArray(h).length};d.first=function(h){return h[0]};d.last=function(h){return h[h.length-1]};d.compact=function(h){return d.select(h,function(i){return !!i})};d.flatten=function(h){return d.reduce(h,[],function(i,j){if(d.isArray(j)){return i.concat(d.flatten(j))}i.push(j);return i})};d.without=function(i){var h=i.slice.call(arguments,0);return d.select(i,function(j){return !d.include(h,j)})};d.uniq=function(i,h){return d.reduce(i,[],function(j,l,k){if(0==k||(h?d.last(j)!=l:!d.include(j,l))){j.push(l)}return j})};d.intersect=function(i){var h=d.toArray(arguments).slice(1);return d.select(d.uniq(i),function(j){return d.all(h,function(k){return d.indexOf(k,j)>=0})})};d.zip=function(){var h=d.toArray(arguments);var l=d.max(d.pluck(h,"length"));var k=new Array(l);for(var j=0;j<l;j++){k[j]=d.pluck(h,String(j))}return k};d.indexOf=function(m,k){if(m.indexOf){return m.indexOf(k)}for(var j=0,h=m.length;j<h;j++){if(m[j]===k){return j}}return -1};d.lastIndexOf=function(k,j){if(k.lastIndexOf){return k.lastIndexOf(j)}var h=k.length;while(h--){if(k[h]===j){return h}}return -1};d.bind=function(j,i){i=i||c;var h=d.toArray(arguments).slice(2);return function(){var k=h.concat(d.toArray(arguments));return j.apply(i,k)}};d.bindAll=function(){var h=d.toArray(arguments);var i=h.pop();d.each(h,function(j){i[j]=d.bind(i[j],i)})};d.delay=function(i,j){var h=d.toArray(arguments).slice(2);return setTimeout(function(){return i.apply(i,h)},j)};d.defer=function(h){return d.delay.apply(d,[h,1].concat(d.toArray(arguments).slice(1)))};d.wrap=function(h,i){return function(){var j=[h].concat(d.toArray(arguments));return i.apply(i,j)}};d.compose=function(){var h=d.toArray(arguments);return function(){for(var j=h.length-1;j>=0;j--){arguments=[h[j].apply(this,arguments)]}return arguments[0]}};d.keys=function(h){return d.map(h,function(j,i){return i})};d.values=function(h){return d.map(h,d.identity)};d.extend=function(h,j){for(var i in j){h[i]=j[i]}return h};d.clone=function(h){if(d.isArray(h)){return h.slice(0)}return d.extend({},h)};d.isEqual=function(i,h){if(i===h){return true}var l=typeof(i),n=typeof(h);if(l!=n){return false}if(i==h){return true}if(i.isEqual){return i.isEqual(h)}if(l!=="object"){return false}var j=d.keys(i),m=d.keys(h);if(j.length!=m.length){return false}for(var k in i){if(!d.isEqual(i[k],h[k])){return false}}return true};d.isEmpty=function(h){return(d.isArray(h)?h:d.values(h)).length==0};d.isElement=function(h){return !!(h&&h.nodeType==1)};d.isArray=function(h){return Object.prototype.toString.call(h)=="[object Array]"};d.isFunction=function(h){return Object.prototype.toString.call(h)=="[object Function]"};d.isUndefined=function(h){return typeof h=="undefined"};d.noConflict=function(){c._=e;return this};d.identity=function(h){return h};d.breakLoop=function(){throw f};var b=0;d.uniqueId=function(h){var i=b++;return h?h+i:i};d.functions=function(){var i=[];for(var h in d){if(Object.prototype.hasOwnProperty.call(d,h)){i.push(h)}}return d.without(i,"VERSION","prototype","noConflict").sort()};d.template=function(j,i){var h=new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+j.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return i?h(i):h};d.forEach=d.each;d.foldl=d.inject=d.reduce;d.foldr=d.reduceRight;d.filter=d.select;d.every=d.all;d.some=d.any;d.methods=d.functions;var a=function(i,h){return h?d(i).chain():i};d.each(d.functions(),function(h){g.prototype[h]=function(){Array.prototype.unshift.call(arguments,this._wrapped);return a(d[h].apply(d,arguments),this._chain)}});d.each(["pop","push","reverse","shift","sort","splice","unshift"],function(h){g.prototype[h]=function(){Array.prototype[h].apply(this._wrapped,arguments);return a(this._wrapped,this._chain)}});d.each(["concat","join","slice"],function(h){g.prototype[h]=function(){return a(Array.prototype[h].apply(this._wrapped,arguments),this._chain)}});g.prototype.chain=function(){this._chain=true;return this};g.prototype.value=function(){return this._wrapped}})();