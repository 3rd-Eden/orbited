<html>
 <head>
  <script src="ServerSentEvents-Gecko.js"></script>
  <script>
   function print(s) {
       output = document.getElementById("shell")
       output.innerHTML += "&rarr; " + s + "<br>"
       output.scrollTop = self.output.scrollHeight     
   }

   receiveCB = function(evt) {
      print("Received Event: (" + evt.type + ") " + evt.data)
   }
   function connect() {
        print("Connecting")
        var url = "http://" + document.domain
        if (location.port)
            url += ":" + location.port
        url += "/echo/ABC?ie=1"
        var s = document.getElementById("ssedom")
        s.addEventSource(url)
        s.addEventListener("message", receiveCB, false)
        s.addEventListener("TCPOpen", receiveCB, false)
        s.addEventListener("TCPPing", receiveCB, false)
   }
  </script>
 </head>
 <body>
  <event-source id="ssedom">
  <button onClick=connect()>connect</button><br>
  <div style="border: 1px solid black; height: 200px; overflow-y: scroll" id="shell"></div>
 </body>
</html>
    